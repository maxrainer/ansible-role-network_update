---
# main.yml

- debug: 
    msg: "{{ hostvars[inventory_hostname]['ansible_password'] }} and {{ ansible_user }} {{ ansible_password | default('empty') }} {{ ansible_ssh_pass }} {{ ansible_host }}"
  delegate_to: linuxserver

- include_tasks: 
    file: precheck.yml
    apply:
      tags: precheck
  tags: [precheck]

- include_tasks: 
    file: nxos_upgrade.yml
    apply:
      tags: upgrade
  tags: [upgrade]
  when: ansible_network_os == 'nxos'

- include_tasks:
    file: postcheck.yml
    apply:
      tags: postcheck
  tags: [postcheck]

- include_tasks: 
    file: nxos_rollback.yml
  when: _rollback